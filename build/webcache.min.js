define("webcache",function(){"use strict";function a(a,c,d){function f(){function d(){o={},p=[],q=c;for(var a=0;c>a;a++)p.push(a)}try{if(q=new Number(b[a+"_count"]),q!=c){for(var e=0;q>e;e++)b.removeItem(a+"_"+e),b.removeItem(a+"_"+e+"_time");b.removeItem(a+"_datas"),b.removeItem(a+"_frees"),b.removeItem(a+"_count"),d()}else o=JSON.parse(b[a+"_datas"]),p=JSON.parse(b[a+"_frees"])}catch(f){d()}}function g(){b[a+"_datas"]=JSON.stringify(o),b[a+"_frees"]=JSON.stringify(p),b[a+"_count"]=q.toString()}function h(a){return p.push(o[a]),delete o[a],!1}function i(c){return o.hasOwnProperty(c)?0>=d?!0:(new Date).getTime()-new Number(b[a+"_"+o[c]+"_time"])>=d?h(c):!0:!1}function j(){if(d>0)for(var a in o)i(a)}function k(c,d){return b[a+"_"+c]=JSON.stringify(d),b[a+"_"+c+"_time"]=(new Date).getTime(),d}function l(a,b){var c=p.pop();return o[a]=c,k(c,b)}function m(a){var b=o[a];if(delete o[a],e){var c={};for(var d in o)c[d]=o[d];o=c}return o[a]=b,b}function n(a,b){return k(m(a),b)}var o={},p=[],q=0;d=d||0,this.has=function(a){return f(),i(a)},this.get=function(c){if(f(),i(c)){var d=JSON.parse(b[a+"_"+m(c)]);return g(),d}},this.put=function(a,b){if(f(),i(a))n(a,b);else{if(0==p.length)for(var c in o)if(i(c)){0==p.length&&h(c);break}l(a,b)}g()},this.set=function(a,b){f(),i(a)&&(n(a,b),g())},this.datas=function(){var c={};f(),j();for(var d in o)c[d]=JSON.parse(b[a+"_"+o[d]]);return c}}var b={removeItem:function(a){delete this[a]}};try{if("localStorage"in window&&window.localStorage){var c=window.localStorage;c.setItem("test_storage",""),c.removeItem("test_storage"),b=window.localStorage}}catch(d){}var e="ActiveXObject"in window;return a});